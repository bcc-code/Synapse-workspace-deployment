(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";var s=globalThis&&globalThis.__createBinding||(Object.create?function(n,i,t,a){a===void 0&&(a=t),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[t]}})}:function(n,i,t,a){a===void 0&&(a=t),n[a]=i[t]}),_=globalThis&&globalThis.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),y=globalThis&&globalThis.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&s(i,n,t);return _(i,n),i},w=globalThis&&globalThis.__awaiter||function(n,i,t,a){function u(e){return e instanceof t?e:new t(function(c){c(e)})}return new(t||(t=Promise))(function(e,c){function o(l){try{r(a.next(l))}catch(p){c(p)}}function h(l){try{r(a.throw(l))}catch(p){c(p)}}function r(l){l.done?e(l.value):u(l.value).then(o,h)}r((a=a.apply(n,i||[])).next())})},O=globalThis&&globalThis.__generator||function(n,i){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,u,e,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(r){return function(l){return h([r,l])}}function h(r){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,u&&(e=r[0]&2?u.return:r[0]?u.throw||((e=u.return)&&e.call(u),0):u.next)&&!(e=e.call(u,r[1])).done)return e;switch(u=0,e&&(r=[r[0]&2,e.value]),r[0]){case 0:case 1:e=r;break;case 4:return t.label++,{value:r[1],done:!1};case 5:t.label++,u=r[1],r=[0];continue;case 7:r=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!e||r[1]>e[0]&&r[1]<e[3])){t.label=r[1];break}if(r[0]===6&&t.label<e[1]){t.label=e[1],e=r;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(r);break}e[2]&&t.ops.pop(),t.trys.pop();continue}r=i.call(n,t)}catch(l){r=[6,l],u=0}finally{a=e=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.main=void 0;var f=y(require("@actions/core")),b=require("./utils/logger"),T=require("./Operations/BundleManager"),d=require("./utils/artifacts_enum"),g=require("./Operations/OperationsManager");function v(){return w(this,void 0,void 0,function(){var n,i,t,a,u;return O(this,function(e){switch(e.label){case 0:b.SystemLogger.setLogger(new b.ActionLogger(!0)),e.label=1;case 1:switch(e.trys.push([1,12,,13]),n=f.getInput("operation"),i=f.getInput("npmpackage"),t=new T.BundleManager(i),a=n,a){case d.OPERATIONS.deploy:return[3,2];case d.OPERATIONS.validateDeploy:return[3,4];case d.OPERATIONS.validate:return[3,7];case"default":return[3,10]}return[3,11];case 2:return[4,g.OperationManager.DeployArtifacts()];case 3:return e.sent(),[3,11];case 4:return[4,t.invokeBundle()];case 5:return e.sent(),[4,g.OperationManager.ValidateAndDeploy()];case 6:return e.sent(),[3,11];case 7:return[4,t.invokeBundle()];case 8:return e.sent(),[4,g.OperationManager.ValidateArtifacts()];case 9:return e.sent(),[3,11];case 10:throw new Error("Operation not supported : "+n);case 11:return[3,13];case 12:throw u=e.sent(),new Error(u.message);case 13:return[2]}})})}exports.main=v,v().then(function(){process.exit(0)}).catch(function(n){f.info("Action failed -> "+n),process.exit(1)})});
